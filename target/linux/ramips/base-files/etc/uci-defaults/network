#!/bin/sh
#
# Copyright (C) 2011 OpenWrt.org
#

[ -e /etc/config/network ] && exit 0

touch /etc/config/network

. /lib/functions/uci-defaults.sh
. /lib/ramips.sh

ucidef_set_interface_loopback

board=$(ramips_board_name)

case "$board" in

wifi-router) 
	ucidef_set_interfaces_lan_wan "eth1.1" "eth1.2"
	ucidef_add_switch "switch0" "1" "1"
	ucidef_add_switch_vlan "switch0" "1" "0 1 2 3 5 6t"
	ucidef_add_switch_vlan "switch0" "2" "4 6t"
	;;
wifi-router_v2) 
	ucidef_set_interfaces_lan_wan "eth1.1" "eth1.2"
	ucidef_add_switch "switch0" "1" "1"
	ucidef_add_switch_vlan "switch0" "1" "1 2 3 4 5 6t"
	ucidef_add_switch_vlan "switch0" "2" "0 6t"
	;;
wifi-router-poe) 
	ucidef_set_interfaces_lan_wan "eth1.1" "eth1.2"
	ucidef_add_switch "switch0" "1" "1"
	ucidef_add_switch_vlan "switch0" "1" "1 2 3 4 5 6t"
	ucidef_add_switch_vlan "switch0" "2" "0 6t"
	;;
wifi-router-wallpoe) 
	ucidef_set_interfaces_lan_wan "eth1.1" "eth1.2"
	ucidef_add_switch "switch0" "1" "1"
	ucidef_add_switch_vlan "switch0" "1" "1 2 3 4 5 6t"
	ucidef_add_switch_vlan "switch0" "2" "0 6t"
	;;
*)
	ucidef_set_interfaces_lan_wan "eth0" "eth1"
	;;
esac

uci commit network

exit 0
