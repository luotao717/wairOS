<%#
LuCI - Lua Configuration Interface
Copyright 2010 Jo-Philipp Wich <xm@subsignal.org>

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

	http://www.apache.org/licenses/LICENSE-2.0

$Id$

-%>
<%
	local is_odm = false
	if luci.config.main.mediaurlbase == "/luci-static/bootstrap_ODM" then
		is_odm = true
        end	
-%>

<%+header%>
<form method="post" action="<%=pcdata(luci.http.getenv("REQUEST_URI"))%>">
	<div class="cbi-map">
		<h2><a id="content" name="content"><%:Bind Device%></a></h2>
		<div class="cbi-map-descr">
			<%- if is_odm then -%>
				<%:Please get account and password from "%><%:Cloud Management Platform%><%:"->"device management", fill and operate device bind.%>
			<%- else -%>
				<%:Please get account and password from "%><a href="http://cloud.fansup.net"><%:RippleTek Cloud Management Platform%></a><%:"->"device management", fill and operate device bind.%>
			<%- end -%>
		</div>
		<fieldset class="cbi-section">
			<legend><%:Bind Device%></legend>

			<br />

			<div class="cbi-value">
				<label class="cbi-value-title"><%:Bind Device Account%></label>
				<div class="cbi-value-field">
					<input type="text" name="account" size="6" maxlength=30 value="" />
				</div>
			</div>
			<div class="cbi-value">
				<label class="cbi-value-title"><%:Bind Device Password%></label>
				<div class="cbi-value-field">
					<input type="password" name="password" size="6" maxlength=30 value="" />
				</div>
			</div>

			<br style="clear:both" /><br />
			<div style="width:30%; float:left;">
				<input type="submit" value="<%:Bind%>" <%- if status == "1" then -%> disabled="disabled" <%- end -%>  class="cbi-button cbi-button-apply" />
			</div>

		</fieldset>
	</div>
	
	<fieldset class="cbi-section" style="display:inline">
		<div class="cbi-value">
			<legend><%:Status%>:</legend>
			<%- if bind then -%>
				<script type="text/javascript">setTimeout("location='<%=controller%>/admin/cloud/dev_bind'", 1000)</script>
				<legend id="diag-rc-legend"><%:Collect Waiting...%></legend>
			<%- else -%>
				<legend id="diag-rc-legend"><%=Status_Message%></legend>
			<%- end -%>
			<span id="diag-rc-output"></span>
		</div>
	</fieldset>
</form>

<%+footer%>
